
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Communication & Competences</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="progress" id="scroll-progress"></div>
  <a class="skip-link" href="#diagnostic">Aller au contenu</a>

  <header>
    <nav class="container">
      <div class="logo">
        <span class="logo-dot" aria-hidden="true"></span>
        Formation Communication
      </div>
      <button class="nav-toggle" id="nav-toggle" type="button" aria-expanded="false" aria-controls="nav-links">
        Menu
      </button>
      <div class="nav-links" id="nav-links">
        <a href="#parcours">Parcours</a>
        <a href="#catalogue">Catalogue</a>
        <a href="#diagnostic">Diagnostic</a>
        <a href="#outils">Outils</a>
        <a href="#profils">Profils</a>
        <a href="#scenarios">Scenarios</a>
        <a href="#synthese">Synthese</a>
      </div>
    </nav>
  </header>

  <main>
    <section class="hero" id="accueil" data-section data-section-label="Accueil">
      <div class="container hero-grid">
        <div class="hero-content" data-reveal>
          <span class="pill">Cours interactif</span>
          <h1>Clarifier sa pensee, aligner ses emotions et agir avec impact.</h1>
          <p>Une page unique qui rassemble l'essentiel : cartes de memorisation, scenarios concrets et outils de communication pour progresser en assertivite, resilience et competences du 21e siecle.</p>
          <div class="hero-actions">
            <a class="btn" href="#parcours">Demarrer le parcours</a>
            <a class="btn secondary" href="#diagnostic">Voir le diagnostic</a>
          </div>
        </div>
        <div class="hero-cards" data-reveal>
          <div class="hero-card">
            <h3>Ce que vous allez travailler</h3>
            <ul class="list">
              <li>Transformer un dialogue interieur limitant.</li>
              <li>Structurer un message assertif.</li>
              <li>Ajuster votre style au profil en face.</li>
              <li>Agir avec calme dans un conflit.</li>
            </ul>
          </div>
          <div class="hero-card media-card">
            <div class="media-placeholder">Visuel a ajouter</div>
            <p>Des emplacements sont prevus pour vos images du cours.</p>
          </div>
        </div>
      </div>
    </section>
    <section class="section" id="parcours" data-section data-section-label="Parcours">
      <div class="container">
        <div class="section-lead">
          <h2>Parcours intelligent</h2>
          <p>Choisissez un objectif. Le site propose un ordre de modules et un angle de travail.</p>
        </div>
        <div class="goal-grid" data-reveal>
          <button class="goal-card active" type="button" data-goal="confiance" data-path="intrapersonnelle,assertivite,resilience" data-focus="Stabiliser l'interieur avant d'oser parler." aria-pressed="true">
            <span class="goal-title">Confiance</span>
            <span class="goal-desc">Calmer le dialogue interieur et oser prendre la parole.</span>
          </button>
          <button class="goal-card" type="button" data-goal="relation" data-path="ecoute,hofman,offman,assertivite" data-focus="Adapter son style pour reduire les tensions." aria-pressed="false">
            <span class="goal-title">Relation</span>
            <span class="goal-desc">Mieux ecouter, mieux s'ajuster, mieux cooperer.</span>
          </button>
          <button class="goal-card" type="button" data-goal="leadership" data-path="hofman,assertivite,offman,resilience" data-focus="Passer du style au message clair." aria-pressed="false">
            <span class="goal-title">Leadership</span>
            <span class="goal-desc">Se positionner, poser des limites, mobiliser.</span>
          </button>
          <button class="goal-card" type="button" data-goal="carriere" data-path="matrice-excellence,index-computation,competences,assertivite" data-focus="Mettre en avant ses competences cle." aria-pressed="false">
            <span class="goal-title">Carriere</span>
            <span class="goal-desc">Rendre visibles ses forces et progresser.</span>
          </button>
          <button class="goal-card" type="button" data-goal="resilience" data-path="resilience,intrapersonnelle,offman" data-focus="Transformer l'epreuve en apprentissage." aria-pressed="false">
            <span class="goal-title">Resilience</span>
            <span class="goal-desc">Garder l'equilibre et rebondir efficacement.</span>
          </button>
        </div>
        <div class="path-grid" data-reveal>
          <div class="card path-panel">
            <h3>Itineraire recommande</h3>
            <ol class="plan-list" id="path-list"></ol>
            <div class="output" id="path-focus">Stabiliser l'interieur avant d'oser parler.</div>
          </div>
          <div class="card">
            <h3>Progression dans la page</h3>
            <div class="progress-track">
              <div class="progress-fill" id="section-progress"></div>
            </div>
            <div class="progress-meta">
              <span id="section-count">0/8 sections explorees</span>
              <button class="btn small" id="next-section-btn" type="button">Aller a la prochaine section</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="catalogue" data-section data-section-label="Catalogue">
      <div class="container">
        <div class="section-lead">
          <h2>Catalogue des modules</h2>
          <p>Chaque carte renvoie a une interaction principale. Filtrez selon votre besoin.</p>
        </div>
        <div class="resource-filter" id="module-filters">
          <button class="filter-btn active" type="button" data-filter="all">Tous</button>
          <button class="filter-btn" type="button" data-filter="fondations">Fondations</button>
          <button class="filter-btn" type="button" data-filter="diagnostic">Diagnostic</button>
          <button class="filter-btn" type="button" data-filter="outils">Outils</button>
          <button class="filter-btn" type="button" data-filter="pratique">Pratique</button>
        </div>
        <div class="course-grid" id="module-cards">
          <a class="course-item" href="#intrapersonnelle" data-tags="fondations,outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 01</span>
            <h3>Communication intrapersonnelle</h3>
            <p>Cartes de reformulation et declics rapides.</p>
          </a>
          <a class="course-item" href="#ecoute" data-tags="fondations,outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 02</span>
            <h3>Ecoute & relation</h3>
            <p>Volonte, intention, attention, confiance.</p>
          </a>
          <a class="course-item" href="#matrice-excellence" data-tags="diagnostic">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 03</span>
            <h3>Matrice d'excellence</h3>
            <p>5 cartes pour voir vos points d'appui.</p>
          </a>
          <a class="course-item" href="#index-computation" data-tags="diagnostic">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 04</span>
            <h3>Index de computation</h3>
            <p>Triade pensee, emotion, comportement.</p>
          </a>
          <a class="course-item" href="#dilts" data-tags="outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 05</span>
            <h3>Matrice de Dilts</h3>
            <p>Explorer les niveaux logiques du changement.</p>
          </a>
          <a class="course-item" href="#hofman" data-tags="outils,profils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 06</span>
            <h3>Quadrant d'Hofman</h3>
            <p>Ajuster son style selon le profil.</p>
          </a>
          <a class="course-item" href="#offman" data-tags="outils,profils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 07</span>
            <h3>Quadrant d'Offman</h3>
            <p>Qualite, piege, challenge, allergie.</p>
          </a>
          <a class="course-item" href="#assertivite" data-tags="outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 08</span>
            <h3>Assertivite</h3>
            <p>Scripts courts pour parler avec clarte.</p>
          </a>
          <a class="course-item" href="#resilience" data-tags="outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 09</span>
            <h3>Resilience</h3>
            <p>Rituels et gestes pour rebondir.</p>
          </a>
          <a class="course-item" href="#competences" data-tags="fondations,outils">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 10</span>
            <h3>Competences 21e siecle</h3>
            <p>Pensee critique, creativite, collaboration.</p>
          </a>
          <a class="course-item" href="#abus" data-tags="pratique">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 11</span>
            <h3>Patron abusif</h3>
            <p>Scenario guide pour agir avec calme.</p>
          </a>
          <a class="course-item" href="#etude-cas" data-tags="pratique">
            <div class="course-thumb media-placeholder"></div>
            <span class="course-meta">Module 12</span>
            <h3>Etude de cas</h3>
            <p>Conflit collegue et alignement.</p>
          </a>
        </div>
      </div>
    </section>
    <section class="section" id="diagnostic" data-section data-section-label="Diagnostic">
      <div class="container">
        <div class="section-lead">
          <h2>Diagnostic rapide</h2>
          <p>Comprendre rapidement ou se situe l'effort. Chaque carte se retourne pour donner un indicateur cle.</p>
        </div>
        <div class="grid-2">
          <div class="card" id="matrice-excellence" data-reveal>
            <h3>Matrice d'excellence</h3>
            <div class="flash-grid" id="excellence-deck">
              <button class="flash-card" type="button" data-flip>
                <span class="flash-front">
                  <strong>Savoir</strong>
                  <span>Ce que je connais.</span>
                </span>
                <span class="flash-back">
                  Indice : puis-je expliquer ce que j'ai appris simplement ?
                </span>
              </button>
              <button class="flash-card" type="button" data-flip>
                <span class="flash-front">
                  <strong>Savoir-faire</strong>
                  <span>Ce que je sais appliquer.</span>
                </span>
                <span class="flash-back">
                  Indice : puis-je demontrer mes competences en situation ?
                </span>
              </button>
              <button class="flash-card" type="button" data-flip>
                <span class="flash-front">
                  <strong>Savoir-etre</strong>
                  <span>Mes attitudes et valeurs.</span>
                </span>
                <span class="flash-back">
                  Indice : mon comportement inspire-t-il confiance ?
                </span>
              </button>
              <button class="flash-card" type="button" data-flip>
                <span class="flash-front">
                  <strong>S'accomplir</strong>
                  <span>Donner du sens.</span>
                </span>
                <span class="flash-back">
                  Indice : ai-je une direction claire pour les 3 prochains mois ?
                </span>
              </button>
              <button class="flash-card" type="button" data-flip>
                <span class="flash-front">
                  <strong>Faire savoir</strong>
                  <span>Valoriser mes forces.</span>
                </span>
                <span class="flash-back">
                  Indice : sais-je presenter mon travail en 2 minutes ?
                </span>
              </button>
            </div>
            <p class="flash-hint">Cliquez sur une carte pour la retourner.</p>
          </div>
          <div class="card" id="index-computation" data-reveal>
            <h3>Index de computation</h3>
            <p>Choisissez la zone qui demande le plus d'attention en ce moment.</p>
            <div class="lens-grid" id="triad-focus">
              <button class="lens-card active" type="button" data-triad="pensee">
                <span>Pensee</span>
                <small>Clarifier</small>
              </button>
              <button class="lens-card" type="button" data-triad="emotion">
                <span>Emotion</span>
                <small>Stabiliser</small>
              </button>
              <button class="lens-card" type="button" data-triad="comportement">
                <span>Comportement</span>
                <small>Agir</small>
              </button>
            </div>
            <div class="output" id="triad-focus-output">Focus pensee : identifier les messages internes qui freinent l'action.</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="outils" data-section data-section-label="Outils">
      <div class="container">
        <div class="section-lead">
          <h2>Outils de communication</h2>
          <p>Des interactions concretes pour transformer vos automatismes.</p>
        </div>
        <div class="grid-3">
          <div class="card" id="intrapersonnelle" data-reveal>
            <h3>Dialogue interieur</h3>
            <p>Retournez la carte pour transformer la pensee negative.</p>
            <button class="flash-card reframe-card" id="reframe-card" type="button" data-flip>
              <span class="flash-front" id="reframe-negative">"Je vais echouer."</span>
              <span class="flash-back" id="reframe-positive">"Je progresse pas a pas."</span>
            </button>
            <div class="deck-controls">
              <button class="btn small" id="reframe-next" type="button">Nouvelle carte</button>
            </div>
          </div>
          <div class="card" id="ecoute" data-reveal>
            <h3>Ecoute & relation</h3>
            <p>Selectionnez la posture a activer dans l'echange.</p>
            <div class="chip-group">
              <button class="chip active" type="button" data-ecoute="volonte">Volonte</button>
              <button class="chip" type="button" data-ecoute="intention">Intention</button>
              <button class="chip" type="button" data-ecoute="attention">Attention</button>
            </div>
            <div class="spotlight" id="ecoute-panel">L'ecoute commence par une volonte claire.</div>
            <ul class="list">
              <li>Observer sans interrompre.</li>
              <li>Clarifier le message recu.</li>
              <li>Limiter les obstacles (stress, precipitation).</li>
            </ul>
          </div>
          <div class="card" id="assertivite" data-reveal>
            <h3>Scripts assertifs</h3>
            <p>Choisissez un script pour poser un message clair.</p>
            <div class="script-grid" id="assert-scripts">
              <button class="script-card active" type="button" data-script="fait">Fait + ressenti</button>
              <button class="script-card" type="button" data-script="besoin">Besoin + limite</button>
              <button class="script-card" type="button" data-script="demande">Demande claire</button>
            </div>
            <div class="output" id="assert-output">Quand un point bloque, je le nomme calmement et j'exprime mon ressenti.</div>
          </div>
        </div>
        <div class="grid-2">
          <div class="card" id="dilts" data-reveal>
            <h3>Matrice de Dilts</h3>
            <p>Chaque niveau propose une question et une action.</p>
            <div class="layer-tabs" id="dilts-tabs">
              <button class="tab active" type="button" data-dilts="environnement">Environnement</button>
              <button class="tab" type="button" data-dilts="comportement">Comportement</button>
              <button class="tab" type="button" data-dilts="competences">Competences</button>
              <button class="tab" type="button" data-dilts="valeurs">Valeurs</button>
              <button class="tab" type="button" data-dilts="identite">Identite</button>
              <button class="tab" type="button" data-dilts="mission">Mission</button>
            </div>
            <div class="spotlight" id="dilts-panel">Ou et quand le probleme apparait-il ? Notez un fait observable.</div>
          </div>
          <div class="card" id="resilience" data-reveal>
            <h3>Resilience</h3>
            <p>Choisissez l'etape a renforcer.</p>
            <div class="ladder" id="resilience-steps">
              <button class="ladder-step active" type="button" data-resilience="face">Faire face</button>
              <button class="ladder-step" type="button" data-resilience="rebond">Rebondir</button>
              <button class="ladder-step" type="button" data-resilience="croissance">Transformer</button>
              <button class="ladder-step" type="button" data-resilience="equilibre">Equilibrer</button>
              <button class="ladder-step" type="button" data-resilience="motivation">Motiver</button>
            </div>
            <div class="output" id="resilience-panel">Faire face : nommer la realite pour retrouver du controle.</div>
          </div>
        </div>
        <div class="card" id="competences" data-reveal>
          <h3>Competences majeures du 21e siecle</h3>
          <p>Selectionnez une competence et l'impact associe.</p>
          <div class="skill-grid" id="skills-grid">
            <button class="skill-card active" type="button" data-skill="pensee">Pensee critique</button>
            <button class="skill-card" type="button" data-skill="creativite">Creativite</button>
            <button class="skill-card" type="button" data-skill="communication">Communication</button>
            <button class="skill-card" type="button" data-skill="collaboration">Collaboration</button>
            <button class="skill-card" type="button" data-skill="numerique">Competence numerique</button>
          </div>
          <div class="spotlight" id="skill-panel">Pensee critique : analyser les infos avant d'agir.</div>
        </div>
      </div>
    </section>
    <section class="section" id="profils" data-section data-section-label="Profils">
      <div class="container">
        <div class="section-lead">
          <h2>Profils & adaptation</h2>
          <p>Ajuster votre style pour mieux passer et reduire les frictions.</p>
        </div>
        <div class="grid-2">
          <div class="card" id="hofman" data-reveal>
            <h3>Quadrant d'Hofman</h3>
            <div class="style-grid" id="hofman-grid">
              <button class="style-card active" type="button" data-hofman="analytique">Analytique</button>
              <button class="style-card" type="button" data-hofman="directif">Directif</button>
              <button class="style-card" type="button" data-hofman="relationnel">Relationnel</button>
              <button class="style-card" type="button" data-hofman="expressif">Expressif</button>
            </div>
            <div class="profile-panel">
              <h4 id="hofman-title">Analytique</h4>
              <p id="hofman-desc">Logique, precis, aime les faits.</p>
              <ul class="list" id="hofman-list">
                <li>Aller droit au point avec des preuves.</li>
                <li>Eviter les approximations.</li>
              </ul>
              <div class="output" id="hofman-advice">Conseil : structurez le message en 3 points clairs.</div>
            </div>
          </div>
          <div class="card" id="offman" data-reveal>
            <h3>Quadrant d'Offman</h3>
            <p>Choisissez une zone pour comprendre le mouvement.</p>
            <div class="offman-grid" id="offman-grid">
              <button class="offman-cell active" type="button" data-offman="qualite">Qualite<br /><strong>Planification</strong></button>
              <button class="offman-cell" type="button" data-offman="piege">Piege<br /><strong>Perfectionnisme</strong></button>
              <button class="offman-cell" type="button" data-offman="challenge">Challenge<br /><strong>Souplesse</strong></button>
              <button class="offman-cell" type="button" data-offman="allergie">Allergie<br /><strong>Desordre</strong></button>
            </div>
            <div class="output" id="offman-panel">Quand la qualite est equilibree, elle soutient l'efficacite.</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="scenarios" data-section data-section-label="Scenarios">
      <div class="container">
        <div class="section-lead">
          <h2>Scenarios pratiques</h2>
          <p>Des choix concrets et leurs impacts. Cliquez pour changer de strategie.</p>
        </div>
        <div class="grid-2">
          <div class="card" id="abus" data-reveal>
            <h3>Gerer un patron abusif</h3>
            <p>Chaque etape protege votre equilibre et clarifie les limites.</p>
            <div class="scenario-map" id="abus-map">
              <button class="scenario-step active" type="button" data-abus="assertive">Parler clairement</button>
              <button class="scenario-step" type="button" data-abus="trace">Assurer la tracabilite</button>
              <button class="scenario-step" type="button" data-abus="limites">Poser des limites</button>
              <button class="scenario-step" type="button" data-abus="documenter">Documenter et escalader</button>
            </div>
            <div class="scenario-panel" id="abus-panel">Je decris les faits, j'exprime mon ressenti, je formule une demande precise.</div>
          </div>
          <div class="card" id="etude-cas" data-reveal>
            <h3>Etude de cas : conflit avec un collegue</h3>
            <p>Choisissez une posture pour garder l'alignement.</p>
            <div class="tabs" data-tabs="cas">
              <button class="tab active" type="button" data-tab="cas-voulu">Ce que je veux etre</button>
              <button class="tab" type="button" data-tab="cas-non">Ce que je refuse</button>
            </div>
            <div class="tab-panel active" data-panel="cas-voulu">
              <ul class="list">
                <li>Generosite equilibree, sans m'oublier.</li>
                <li>Honnetete avec courage.</li>
                <li>Fidelite envers les autres et moi-meme.</li>
              </ul>
            </div>
            <div class="tab-panel" data-panel="cas-non">
              <ul class="list">
                <li>Donner sans limite jusqu'a l'epuisement.</li>
                <li>Brutalite ou exigence excessive.</li>
                <li>Fidelite automatique quand il faut partir.</li>
              </ul>
            </div>
            <div class="output" id="cas-output">Choisissez une posture pour definir votre prochaine action.</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="synthese" data-section data-section-label="Synthese">
      <div class="container">
        <div class="section-lead">
          <h2>Synthese personnelle</h2>
          <p>Une synthese automatique basee sur vos choix dans la page.</p>
        </div>
        <div class="grid-2">
          <div class="card" data-reveal>
            <h3>Resume actionnable</h3>
            <div class="hero-actions">
              <button class="btn" id="summary-build" type="button">Generer la synthese</button>
              <button class="btn secondary" id="summary-copy" type="button">Copier</button>
            </div>
            <div class="summary-output" id="summary-output">Cliquez sur "Generer la synthese" pour obtenir votre resume.</div>
          </div>
          <div class="card" data-reveal>
            <h3>Prochaines actions</h3>
            <div class="action-grid">
              <div class="action-card">Choisir un module prioritaire.</div>
              <div class="action-card">Appliquer un script assertif.</div>
              <div class="action-card">Adapter votre style au profil en face.</div>
              <div class="action-card">Prendre une decision claire.</div>
            </div>
            <div class="callout">Rappel : des actions courtes et regulieres creent le changement.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>Formation Communication - Contenus issus des supports du cours.</p>
    </div>
  </footer>

  <script>
    const navToggle = document.getElementById("nav-toggle");
    const navLinks = document.getElementById("nav-links");
    const progress = document.getElementById("scroll-progress");

    if (navToggle && navLinks) {
      navToggle.addEventListener("click", () => {
        const isOpen = navLinks.classList.toggle("open");
        navToggle.setAttribute("aria-expanded", String(isOpen));
      });

      navLinks.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => {
          navLinks.classList.remove("open");
          navToggle.setAttribute("aria-expanded", "false");
        });
      });
    }

    if (progress) {
      window.addEventListener("scroll", () => {
        const total = document.documentElement.scrollHeight - window.innerHeight;
        const progressRatio = total > 0 ? window.scrollY / total : 0;
        progress.style.width = `${Math.min(progressRatio * 100, 100)}%`;
      });
    }

    const revealElements = document.querySelectorAll("[data-reveal]");
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("is-visible");
          }
        });
      },
      { threshold: 0.2 }
    );

    revealElements.forEach((el) => observer.observe(el));

    const sectionProgress = document.getElementById("section-progress");
    const sectionCount = document.getElementById("section-count");
    const nextSectionBtn = document.getElementById("next-section-btn");
    const trackedSections = Array.from(document.querySelectorAll("[data-section]"));
    const visitedSections = new Set();

    function updateSectionProgress() {
      const total = trackedSections.length;
      const count = visitedSections.size;
      if (sectionProgress) {
        sectionProgress.style.width = total ? `${(count / total) * 100}%` : "0%";
      }
      if (sectionCount) {
        sectionCount.textContent = `${count}/${total} sections explorees`;
      }
    }

    if (trackedSections.length) {
      const sectionObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              visitedSections.add(entry.target.id);
              updateSectionProgress();
            }
          });
        },
        { threshold: 0.3 }
      );

      trackedSections.forEach((section) => sectionObserver.observe(section));
      updateSectionProgress();
    }

    if (nextSectionBtn && trackedSections.length) {
      nextSectionBtn.addEventListener("click", () => {
        const next = trackedSections.find((section) => !visitedSections.has(section.id)) || trackedSections[0];
        if (next) {
          next.scrollIntoView({ behavior: "smooth" });
        }
      });
    }

    const goalCards = document.querySelectorAll(".goal-card");
    const pathList = document.getElementById("path-list");
    const pathFocus = document.getElementById("path-focus");

    function buildPath(goalCard) {
      if (!goalCard || !pathList || !pathFocus) {
        return;
      }
      const pathIds = (goalCard.dataset.path || "").split(",").filter(Boolean);
      pathList.innerHTML = pathIds
        .map((id) => {
          const label = document.getElementById(id)?.querySelector("h3")?.textContent || id;
          return `<li><a href="#${id}">${label}</a></li>`;
        })
        .join("");
      pathFocus.textContent = goalCard.dataset.focus || "Choisissez un objectif pour generer un itineraire.";
    }

    goalCards.forEach((card) => {
      card.addEventListener("click", () => {
        goalCards.forEach((btn) => {
          btn.classList.remove("active");
          btn.setAttribute("aria-pressed", "false");
        });
        card.classList.add("active");
        card.setAttribute("aria-pressed", "true");
        buildPath(card);
      });
    });

    buildPath(document.querySelector(".goal-card.active"));

    const filterButtons = document.querySelectorAll("[data-filter]");
    const moduleCards = document.querySelectorAll("#module-cards .course-item");

    function filterModules(filter) {
      moduleCards.forEach((card) => {
        const tags = (card.dataset.tags || "").split(",");
        const isVisible = filter === "all" || tags.includes(filter);
        card.classList.toggle("is-hidden", !isVisible);
      });
    }

    filterButtons.forEach((button) => {
      button.addEventListener("click", () => {
        filterButtons.forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        filterModules(button.dataset.filter);
      });
    });

    const flipCards = document.querySelectorAll("[data-flip]");
    flipCards.forEach((card) => {
      card.addEventListener("click", () => {
        card.classList.toggle("is-flipped");
      });
    });

    const reframePairs = [
      {
        negative: "Je vais echouer.",
        positive: "Je progresse pas a pas."
      },
      {
        negative: "Les autres sont meilleurs que moi.",
        positive: "Je compare mon progres, pas mon point de depart."
      },
      {
        negative: "Je vais me tromper en parlant.",
        positive: "Je peux corriger et continuer."
      },
      {
        negative: "Je n'ai pas le niveau.",
        positive: "Je peux apprendre en pratiquant."
      }
    ];

    const reframeCard = document.getElementById("reframe-card");
    const reframeNegative = document.getElementById("reframe-negative");
    const reframePositive = document.getElementById("reframe-positive");
    const reframeNext = document.getElementById("reframe-next");
    let reframeIndex = 0;

    function updateReframe() {
      const pair = reframePairs[reframeIndex % reframePairs.length];
      if (reframeNegative && reframePositive) {
        reframeNegative.textContent = `"${pair.negative}"`;
        reframePositive.textContent = `"${pair.positive}"`;
      }
      if (reframeCard) {
        reframeCard.classList.remove("is-flipped");
      }
    }

    if (reframeNext) {
      reframeNext.addEventListener("click", () => {
        reframeIndex += 1;
        updateReframe();
      });
    }

    updateReframe();

    const triadButtons = document.querySelectorAll(".lens-card");
    const triadOutput = document.getElementById("triad-focus-output");
    const triadMap = {
      pensee: "Focus pensee : identifier les messages internes qui freinent l'action.",
      emotion: "Focus emotion : stabiliser l'energie avant de reagir.",
      comportement: "Focus comportement : choisir un geste concret et simple."
    };

    triadButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        triadButtons.forEach((button) => button.classList.remove("active"));
        btn.classList.add("active");
        if (triadOutput) {
          triadOutput.textContent = triadMap[btn.dataset.triad] || "";
        }
      });
    });

    const ecoutePanel = document.getElementById("ecoute-panel");
    const ecouteMap = {
      volonte: "L'ecoute commence par une volonte claire.",
      intention: "L'intention donne une direction a l'echange.",
      attention: "L'attention stabilise la relation et la confiance."
    };
    document.querySelectorAll("[data-ecoute]").forEach((btn) => {
      btn.addEventListener("click", () => {
        const group = btn.closest(".chip-group");
        group.querySelectorAll(".chip").forEach((el) => el.classList.remove("active"));
        btn.classList.add("active");
        if (ecoutePanel) {
          ecoutePanel.textContent = ecouteMap[btn.dataset.ecoute] || "";
        }
      });
    });

    const assertScripts = document.querySelectorAll(".script-card");
    const assertOutput = document.getElementById("assert-output");
    const assertMap = {
      fait: "Quand un point bloque, je le nomme calmement et j'exprime mon ressenti.",
      besoin: "Je formule mon besoin clairement et je pose une limite respectueuse.",
      demande: "Je propose une action concrete et un delai realiste."
    };

    assertScripts.forEach((script) => {
      script.addEventListener("click", () => {
        assertScripts.forEach((btn) => btn.classList.remove("active"));
        script.classList.add("active");
        if (assertOutput) {
          assertOutput.textContent = assertMap[script.dataset.script] || "";
        }
      });
    });

    const diltsTabs = document.querySelectorAll("[data-dilts]");
    const diltsPanel = document.getElementById("dilts-panel");
    const diltsMap = {
      environnement: "Ou et quand le probleme apparait-il ? Notez un fait observable.",
      comportement: "Que fais-je exactement ? Decrivez une action concrete.",
      competences: "Quelles competences me manquent ou sont sous-utilisees ?",
      valeurs: "Pourquoi est-ce important pour moi ?",
      identite: "Quel role suis-je en train de jouer ?",
      mission: "Quel impact plus large je veux produire ?"
    };

    diltsTabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        diltsTabs.forEach((btn) => btn.classList.remove("active"));
        tab.classList.add("active");
        if (diltsPanel) {
          diltsPanel.textContent = diltsMap[tab.dataset.dilts] || "";
        }
      });
    });

    const resilienceSteps = document.querySelectorAll(".ladder-step");
    const resiliencePanel = document.getElementById("resilience-panel");
    const resilienceMap = {
      face: "Faire face : nommer la realite pour retrouver du controle.",
      rebond: "Rebondir : identifier une action immediate, meme petite.",
      croissance: "Transformer : extraire un apprentissage utile.",
      equilibre: "Equilibrer : stabiliser sommeil, energie, respiration.",
      motivation: "Motiver : se rappeler la raison d'agir."
    };

    resilienceSteps.forEach((step) => {
      step.addEventListener("click", () => {
        resilienceSteps.forEach((btn) => btn.classList.remove("active"));
        step.classList.add("active");
        if (resiliencePanel) {
          resiliencePanel.textContent = resilienceMap[step.dataset.resilience] || "";
        }
      });
    });

    const skillCards = document.querySelectorAll(".skill-card");
    const skillPanel = document.getElementById("skill-panel");
    const skillMap = {
      pensee: "Pensee critique : analyser les infos avant d'agir.",
      creativite: "Creativite : produire des options nouvelles.",
      communication: "Communication : rendre le message clair et convaincant.",
      collaboration: "Collaboration : mobiliser l'intelligence collective.",
      numerique: "Competence numerique : travailler efficacement avec la technologie."
    };

    skillCards.forEach((card) => {
      card.addEventListener("click", () => {
        skillCards.forEach((btn) => btn.classList.remove("active"));
        card.classList.add("active");
        if (skillPanel) {
          skillPanel.textContent = skillMap[card.dataset.skill] || "";
        }
      });
    });

    const hofmanButtons = document.querySelectorAll("[data-hofman]");
    const hofmanTitle = document.getElementById("hofman-title");
    const hofmanDesc = document.getElementById("hofman-desc");
    const hofmanList = document.getElementById("hofman-list");
    const hofmanAdvice = document.getElementById("hofman-advice");
    const hofmanMap = {
      analytique: {
        title: "Analytique",
        desc: "Logique, precis, aime les faits.",
        tips: ["Aller droit au point avec des preuves.", "Eviter les approximations."],
        advice: "Conseil : structurez le message en 3 points clairs."
      },
      directif: {
        title: "Directif",
        desc: "Oriente resultats, rapide.",
        tips: ["Utiliser un format court.", "Proposer une action immediate."],
        advice: "Conseil : terminez par une demande precise et un delai."
      },
      relationnel: {
        title: "Relationnel",
        desc: "Empathique, a l'ecoute.",
        tips: ["Commencer par reconnaitre l'autre.", "Formuler le besoin avec respect."],
        advice: "Conseil : nommez l'impact relationnel avant la demande."
      },
      expressif: {
        title: "Expressif",
        desc: "Creatif, enthousiaste.",
        tips: ["Valoriser la vision.", "Poser des limites claires."],
        advice: "Conseil : rester positif tout en cadrant l'action."
      }
    };

    hofmanButtons.forEach((button) => {
      button.addEventListener("click", () => {
        hofmanButtons.forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        const data = hofmanMap[button.dataset.hofman];
        if (!data) {
          return;
        }
        if (hofmanTitle) {
          hofmanTitle.textContent = data.title;
        }
        if (hofmanDesc) {
          hofmanDesc.textContent = data.desc;
        }
        if (hofmanList) {
          hofmanList.innerHTML = data.tips.map((tip) => `<li>${tip}</li>`).join("");
        }
        if (hofmanAdvice) {
          hofmanAdvice.textContent = data.advice;
        }
      });
    });

    const offmanButtons = document.querySelectorAll("[data-offman]");
    const offmanPanel = document.getElementById("offman-panel");
    const offmanMap = {
      qualite: "Quand la qualite est equilibree, elle soutient l'efficacite.",
      piege: "En exces, la qualite bascule vers le piege : perfectionnisme.",
      challenge: "Le challenge consiste a developper la souplesse.",
      allergie: "L'allergie signale ce que l'on refuse chez l'autre : le desordre."
    };

    offmanButtons.forEach((button) => {
      button.addEventListener("click", () => {
        offmanButtons.forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        if (offmanPanel) {
          offmanPanel.textContent = offmanMap[button.dataset.offman] || "";
        }
      });
    });

    const abusSteps = document.querySelectorAll("[data-abus]");
    const abusPanel = document.getElementById("abus-panel");
    const abusMap = {
      assertive: "Je decris les faits, j'exprime mon ressenti, je formule une demande precise.",
      trace: "Je confirme par ecrit pour garder une trace claire des echanges.",
      limites: "Je pose des limites fermes sans entrer dans l'attaque personnelle.",
      documenter: "Je documente les incidents et j'utilise les ressources internes."
    };

    abusSteps.forEach((step) => {
      step.addEventListener("click", () => {
        abusSteps.forEach((btn) => btn.classList.remove("active"));
        step.classList.add("active");
        if (abusPanel) {
          abusPanel.textContent = abusMap[step.dataset.abus] || "";
        }
      });
    });

    document.querySelectorAll("[data-tabs]").forEach((group) => {
      const buttons = group.querySelectorAll("[data-tab]");
      const panels = group.querySelectorAll("[data-panel]");
      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          buttons.forEach((btn) => btn.classList.remove("active"));
          panels.forEach((panel) => panel.classList.remove("active"));
          button.classList.add("active");
          const target = button.dataset.tab;
          const panel = group.querySelector(`[data-panel="${target}"]`);
          if (panel) {
            panel.classList.add("active");
          }
          const casOutput = document.getElementById("cas-output");
          if (casOutput) {
            casOutput.textContent = button.dataset.tab === "cas-voulu"
              ? "Je choisis une posture alignee pour clarifier la situation."
              : "Je refuse les extremes qui cassent la relation.";
          }
        });
      });
    });

    const summaryBuild = document.getElementById("summary-build");
    const summaryCopy = document.getElementById("summary-copy");
    const summaryOutput = document.getElementById("summary-output");

    function buildSummary() {
      if (!summaryOutput) {
        return;
      }
      const goal = document.querySelector(".goal-card.active .goal-title")?.textContent || "Objectif";
      const focus = pathFocus?.textContent || "Focus";
      const triad = document.querySelector(".lens-card.active span")?.textContent || "Focus";
      const script = document.querySelector(".script-card.active")?.textContent || "Script";
      const hofman = document.querySelector("[data-hofman].active")?.textContent || "Profil";
      const abus = document.querySelector(".scenario-step.active")?.textContent || "Etape";

      summaryOutput.textContent = `Objectif : ${goal}\nFocus : ${focus}\nTriade a renforcer : ${triad}\nScript choisi : ${script}\nProfil cible : ${hofman}\nScenario prioritaire : ${abus}`;
    }

    if (summaryBuild) {
      summaryBuild.addEventListener("click", buildSummary);
    }

    if (summaryCopy && summaryOutput) {
      summaryCopy.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(summaryOutput.textContent);
          summaryCopy.textContent = "Copie";
          setTimeout(() => {
            summaryCopy.textContent = "Copier";
          }, 1200);
        } catch (error) {
          summaryCopy.textContent = "Copie indisponible";
        }
      });
    }
  </script>
</body>
</html>
